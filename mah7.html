<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IA Mah7</title>
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1995/1995574.png" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #eee;
      margin: 0; padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      background: #1e1e1e;
      padding: 1rem;
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
      color: #7b68ee;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    header img {
      width: 32px;
      height: 32px;
    }
    main {
      flex: 1;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      overflow: auto;
      gap: 1rem;
    }
    #chat {
      flex: 1;
      background: #222;
      padding: 1rem;
      border-radius: 8px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      scrollbar-width: thin;
      scrollbar-color: #7b68ee transparent;
    }
    #chat::-webkit-scrollbar {
      width: 8px;
    }
    #chat::-webkit-scrollbar-track {
      background: transparent;
    }
    #chat::-webkit-scrollbar-thumb {
      background-color: #7b68ee;
      border-radius: 4px;
    }
    .msg {
      max-width: 70%;
      padding: 0.6rem 1rem;
      border-radius: 20px;
      word-wrap: break-word;
      white-space: pre-wrap;
      line-height: 1.3;
      font-size: 1rem;
    }
    .user {
      background: #7b68ee;
      align-self: flex-end;
      color: white;
    }
    .ai {
      background: #333;
      align-self: flex-start;
      color: #ccc;
      font-style: italic;
    }
    footer {
      padding: 1rem;
      background: #1e1e1e;
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    input[type=text] {
      flex: 1;
      padding: 0.6rem;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
      background: #333;
      color: #eee;
    }
    input[type=text]::placeholder {
      color: #999;
    }
    button {
      background: #7b68ee;
      border: none;
      color: white;
      font-weight: bold;
      padding: 0.6rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    button:disabled {
      background: #555;
      cursor: not-allowed;
    }
    button:hover:not(:disabled) {
      background: #5a4fd1;
    }
    @media (max-width: 600px) {
      .msg {
        max-width: 90%;
      }
      header {
        font-size: 1.4rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="https://cdn-icons-png.flaticon.com/512/1995/1995574.png" alt="C√©rebro IA" />
    IA Mah7
  </header>
  <main>
    <div id="chat"></div>
  </main>
  <footer>
    <input id="inputMsg" type="text" placeholder="Digite sua mensagem..." autocomplete="off" />
    <button id="btnSend" disabled>Enviar</button>
    <button id="btnClear" title="Limpar chat" aria-label="Limpar chat">üóëÔ∏è</button>
  </footer>

  <script>
    const chat = document.getElementById('chat');
    const inputMsg = document.getElementById('inputMsg');
    const btnSend = document.getElementById('btnSend');
    const btnClear = document.getElementById('btnClear');

    // Habilita bot√£o s√≥ se tiver texto
    inputMsg.addEventListener('input', () => {
      btnSend.disabled = inputMsg.value.trim() === '';
    });

    // Adiciona mensagem no chat (user ou ai)
    function addMessage(text, sender) {
      const div = document.createElement('div');
      div.classList.add('msg', sender);
      div.textContent = text;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }

    // Salvar hist√≥rico no localStorage
    function saveHistory(history) {
      localStorage.setItem('mah7_chat_history', JSON.stringify(history));
    }

    // Carregar hist√≥rico do localStorage
    function loadHistory() {
      const h = localStorage.getItem('mah7_chat_history');
      return h ? JSON.parse(h) : [];
    }

    // Atualiza o chat visual com o hist√≥rico
    function renderHistory() {
      chat.innerHTML = '';
      const history = loadHistory();
      history.forEach(({text, sender}) => {
        addMessage(text, sender);
      });
    }

    // Resposta simples da IA Mah7
    function respondTo(message) {
      message = message.toLowerCase();

      // Comandos simples
      if(message.includes('oi') || message.includes('ol√°')) {
        return 'Ol√°! Eu sou a Mah7, sua assistente virtual.';
      }
      if(message.includes('como voc√™ est√°')) {
        return 'Estou sempre pronta para ajudar voc√™!';
      }
      if(message.includes('ajuda')) {
        return `Voc√™ pode me perguntar sobre:
- Informa√ß√µes gerais
- Data e hora atual
- Comandos b√°sicos
- Atualizar projeto Mah7
Experimente!`;
      }
      if(message.includes('data') || message.includes('hora')) {
        return `Agora √©: ${new Date().toLocaleString('pt-BR')}`;
      }
      if(message.includes('projeto mah7')) {
        return 'Este √© o projeto Mah7, sua IA assistente pessoal em desenvolvimento!';
      }

      // Resposta default
      return 'Desculpe, n√£o entendi. Pode tentar outra pergunta?';
    }

    // Carregar hist√≥rico ao abrir a p√°gina
    renderHistory();

    // Enviar mensagem
    btnSend.addEventListener('click', () => {
      const userText = inputMsg.value.trim();
      if(!userText) return;

      addMessage(userText, 'user');

      // Salvar no hist√≥rico
      const history = loadHistory();
      history.push({text: userText, sender: 'user'});

      inputMsg.value = '';
      btnSend.disabled = true;

      setTimeout(() => {
        const reply = respondTo(userText);
        addMessage(reply, 'ai');

        history.push({text: reply, sender: 'ai'});
        saveHistory(history);
      }, 800);
    });

    // Enter para enviar
    inputMsg.addEventListener('keydown', e => {
      if(e.key === 'Enter' && !btnSend.disabled) {
        btnSend.click();
      }
    });

    // Limpar chat e hist√≥rico
    btnClear.addEventListener('click', () => {
      if(confirm('Deseja realmente limpar todo o hist√≥rico do chat?')) {
        localStorage.removeItem('mah7_chat_history');
        chat.innerHTML = '';
      }
    });
  </script>
</body>
</html>
